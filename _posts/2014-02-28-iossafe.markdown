---
layout: post
title:  为什么不用担心iPhone丢了
date:   2014-02-28 23:00:56
categories: 每日一篇千字文 
---

最近Apple发布[iOS安全白皮书](http://images.apple.com/iphone/business/docs/iOS_Security_Feb14.pdf)，读了几处自己感兴趣的章节。

###锁屏密码
iOS支持4位数字或任意字母和数字组合的锁屏密码（可在设置中采用复杂密码）。
很多地方用到的加密密钥就是用锁屏密码会跟设备UID生成的，设备UID是生产的时候就写到应用处理器中的一个AES 256位的key，每台设备唯一，苹果不保存这个记录。这有一个好处，使得你只能在该台暴力破解锁屏密码，且不能并行破解。
如果使用暴力破解，每尝试一次会增加80毫秒的等待时间，破解一个6位的小写字母数字组合的密码需要超过5.5年的时间。
所以，如果用iPhone，最好还是把密码设置上，4位的简单密码也行。

###iMessage
苹果不记录消息和附件的内容，只有发送者和接受者可以访问内容，苹果也无法解密。
当一个用户使用iMessage的时候，设备产生两对密码对，一个1280位的RSA key用于加密，一个256位的ECDSA key用于签名。每个密码对的私钥存在设备的钥匙串里面，公钥则发送到苹果的服务器(IDS)。公钥会和邮箱和手机号码存在一起用于查询。
当往一个手机发送消息的时候，iPhone会先从IDS查询到该手机对应的公钥，然后使用该公钥加密消息，再用发送者的私钥签名后发送。如果消息太长或者有附件比如图片时，会使用一个随机的key加密附件，然后上传到iCloud，这个key和附件的iCloud地址URI也使用私钥加密和签名了。
一旦接受者收到消息，验证签名，用私钥解密内容即可。
使用iMessage，不用担心别人窃听到你的内容。

###Siri
Siri收集了不少用户信息，并且会保存较长的时间。
从设置项中打开Siri的时候，Siri会生成一个随机的标识符，从设置里面关掉再打开会生成一个新的标识符，这个标识符会用于个性化Siri的服务。当然，为了这个个性化的服务，Siri会收集很多信息，比如听的音乐，提醒项目，通讯录的信息，传到服务器中。跟Siri对话的时候，会生成一个sessionid，然后Siri会收集通讯录中使用者名字和地理坐标。如果10分钟不活动，这些会话信息会删除。跟Siri的语音对话包括用户标识符会在苹果的服务器中保存半年，半年后，苹果去掉标识符再继续保存两年，这些数据用于改进Siri。

白皮书也写得干净利落，苹果的设计确实很牛逼，让你觉得使用iPhone是很安全的，只要设置好，手机丢了也没事，不用担心数据的事情，比Android好一万倍。但再牛逼的设计，也有人会犯[低级错误](http://coolshell.cn/articles/11112.html)，人确实是系统安全中最薄弱的环节。